!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=17)}({0:function(t,n,e){!function(t,e){e(n)}(0,function(t){"use strict";function n(){}function e(t){if(!t)return n;var e,r,o=t.scale[0],a=t.scale[1],i=t.translate[0],u=t.translate[1];return function(t,n){n||(e=r=0),t[0]=(e+=t[0])*o+i,t[1]=(r+=t[1])*a+u}}function r(t){if(!t)return n;var e,r,o=t.scale[0],a=t.scale[1],i=t.translate[0],u=t.translate[1];return function(t,n){n||(e=r=0);var c=Math.round((t[0]-i)/o),f=Math.round((t[1]-u)/a);t[0]=c-e,t[1]=f-r,e=c,r=f}}function o(t,n){for(var e,r=t.length,o=r-n;o<--r;)e=t[o],t[o++]=t[r],t[r]=e}function a(t,n){for(var e=0,r=t.length;e<r;){var o=e+r>>>1;t[o]<n?e=o+1:r=o}return e}function i(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return u(t,n)})}:u(t,n)}function u(t,n){var e={type:"Feature",id:n.id,properties:n.properties||{},geometry:c(t,n)};return null==n.id&&delete e.id,e}function c(t,n){function r(t,n){n.length&&n.pop();for(var e,r=l[t<0?~t:t],a=0,i=r.length;a<i;++a)n.push(e=r[a].slice()),s(e,a);t<0&&o(n,i)}function a(t){return t=t.slice(),s(t,0),t}function i(t){for(var n=[],e=0,o=t.length;e<o;++e)r(t[e],n);return n.length<2&&n.push(n[0].slice()),n}function u(t){for(var n=i(t);n.length<4;)n.push(n[0].slice());return n}function c(t){return t.map(u)}function f(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(f)}:n in p?{type:n,coordinates:p[n](t)}:null}var s=e(t.transform),l=t.arcs,p={Point:function(t){return a(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(a)},LineString:function(t){return i(t.arcs)},MultiLineString:function(t){return t.arcs.map(i)},Polygon:function(t){return c(t.arcs)},MultiPolygon:function(t){return t.arcs.map(c)}};return f(n)}function f(t,n){function e(n){var e,r=t.arcs[n<0?~n:n],o=r[0];return t.transform?(e=[0,0],r.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=r[r.length-1],n<0?[e,o]:[o,e]}function r(t,n){for(var e in t){var r=t[e];delete n[r.start],delete r.start,delete r.end,r.forEach(function(t){o[t<0?~t:t]=1}),u.push(r)}}var o={},a={},i={},u=[],c=-1;return n.forEach(function(e,r){var o,a=t.arcs[e<0?~e:e];a.length<3&&!a[1][0]&&!a[1][1]&&(o=n[++c],n[c]=e,n[r]=o)}),n.forEach(function(t){var n,r,o=e(t),u=o[0],c=o[1];if(n=i[u])if(delete i[n.end],n.push(t),n.end=c,r=a[c]){delete a[r.start];var f=r===n?n:n.concat(r);a[f.start=n.start]=i[f.end=r.end]=f}else a[n.start]=i[n.end]=n;else if(n=a[c])if(delete a[n.start],n.unshift(t),n.start=u,r=i[u]){delete i[r.end];var s=r===n?n:r.concat(n);a[s.start=r.start]=i[s.end=n.end]=s}else a[n.start]=i[n.end]=n;else n=[t],a[n.start=u]=i[n.end=c]=n}),r(i,a),r(a,i),n.forEach(function(t){o[t<0?~t:t]||u.push([t])}),u}function s(t){return c(t,l.apply(this,arguments))}function l(t,n,e){function r(t){var n=t<0?~t:t;(s[n]||(s[n]=[])).push({i:t,g:c})}function o(t){t.forEach(r)}function a(t){t.forEach(o)}function i(t){"GeometryCollection"===t.type?t.geometries.forEach(i):t.type in l&&(c=t,l[t.type](t.arcs))}var u=[];if(arguments.length>1){var c,s=[],l={LineString:o,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};i(n),s.forEach(arguments.length<3?function(t){u.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&u.push(t[0].i)})}else for(var p=0,d=t.arcs.length;p<d;++p)u.push(p);return{type:"MultiLineString",arcs:f(t,u)}}function p(t){var n=t[0],e=t[1],r=t[2];return Math.abs((n[0]-r[0])*(e[1]-n[1])-(n[0]-e[0])*(r[1]-n[1]))}function d(t){for(var n,e=-1,r=t.length,o=t[r-1],a=0;++e<r;)n=o,o=t[e],a+=n[0]*o[1]-n[1]*o[0];return a/2}function h(t){return c(t,g.apply(this,arguments))}function g(t,n){function e(t){t.forEach(function(n){n.forEach(function(n){(o[n=n<0?~n:n]||(o[n]=[])).push(t)})}),a.push(t)}function r(n){return Math.abs(d(c(t,{type:"Polygon",arcs:[n]}).coordinates[0]))}var o={},a=[],i=[];return n.forEach(function(t){"Polygon"===t.type?e(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(e)}),a.forEach(function(t){if(!t._){var n=[],e=[t];for(t._=1,i.push(n);t=e.pop();)n.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,e.push(t))})})})}}),a.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(n){var e,a=[];if(n.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&a.push(t)})})}),a=f(t,a),(e=a.length)>1)for(var i,u,c=1,s=r(a[0]);c<e;++c)(i=r(a[c]))>s&&(u=a[0],a[0]=a[c],a[c]=u,s=i);return a})}}function v(t){function n(t,n){t.forEach(function(t){t<0&&(t=~t);var e=o[t];e?e.push(n):o[t]=[n]})}function e(t,e){t.forEach(function(t){n(t,e)})}function r(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,n)}):t.type in u&&u[t.type](t.arcs,n)}var o={},i=t.map(function(){return[]}),u={LineString:n,MultiLineString:e,Polygon:e,MultiPolygon:function(t,n){t.forEach(function(t){e(t,n)})}};t.forEach(r);for(var c in o)for(var f=o[c],s=f.length,l=0;l<s;++l)for(var p=l+1;p<s;++p){var d,h=f[l],g=f[p];(d=i[h])[c=a(d,g)]!==g&&d.splice(c,0,g),(d=i[g])[c=a(d,h)]!==h&&d.splice(c,0,h)}return i}function y(t,n){return t[1][2]-n[1][2]}function m(){function t(t,n){for(;n>0;){var e=(n+1>>1)-1,o=r[e];if(y(t,o)>=0)break;r[o._=n]=o,r[t._=n=e]=t}}function n(t,n){for(;;){var e=n+1<<1,a=e-1,i=n,u=r[i];if(a<o&&y(r[a],u)<0&&(u=r[i=a]),e<o&&y(r[e],u)<0&&(u=r[i=e]),i===n)break;r[u._=n]=u,r[t._=n=i]=t}}var e={},r=[],o=0;return e.push=function(n){return t(r[n._=o]=n,o++),o},e.pop=function(){if(!(o<=0)){var t,e=r[0];return--o>0&&(t=r[o],n(r[t._=0]=t,0)),e}},e.remove=function(e){var a,i=e._;if(r[i]===e)return i!==--o&&(a=r[o],(y(a,e)<0?t:n)(r[a._=i]=a,i)),i},e}function E(t,n){function o(t){u.remove(t),t[1][2]=n(t),u.push(t)}var a=e(t.transform),i=r(t.transform),u=m();return n||(n=p),t.arcs.forEach(function(t){var e,r,c,f,s=[],l=0;for(r=0,c=t.length;r<c;++r)f=t[r],a(t[r]=[f[0],f[1],1/0],r);for(r=1,c=t.length-1;r<c;++r)e=t.slice(r-1,r+2),e[1][2]=n(e),s.push(e),u.push(e);for(r=0,c=s.length;r<c;++r)e=s[r],e.previous=s[r-1],e.next=s[r+1];for(;e=u.pop();){var p=e.previous,d=e.next;e[1][2]<l?e[1][2]=l:l=e[1][2],p&&(p.next=d,p[2]=e[2],o(p)),d&&(d.previous=p,d[0]=e[0],o(d))}t.forEach(i)}),t}t.version="1.6.27",t.mesh=s,t.meshArcs=l,t.merge=h,t.mergeArcs=g,t.feature=i,t.neighbors=v,t.presimplify=E,Object.defineProperty(t,"__esModule",{value:!0})})},1:function(t,n,e){!function(n,e){t.exports=e()}(0,function(){"use strict";function t(){}function n(n){function e(){if(!f)try{a()}catch(t){s[h+d-1]&&u(t)}}function a(){for(;f=p&&d<n;){var t=h+d,e=s[t],r=e.length-1,a=e[r];e[r]=i(t),--p,++d,e=a.apply(null,e),s[t]&&(s[t]=e||o)}}function i(t){return function(n,r){s[t]&&(--d,++h,s[t]=null,null==g&&(null!=n?u(n):(l[t]=r,p?e():d||v(g,l))))}}function u(t){var n,e=s.length;for(g=t,l=void 0,p=NaN;--e>=0;)if((n=s[e])&&(s[e]=null,n.abort))try{n.abort()}catch(t){}d=NaN,v(g,l)}if(!(n>=1))throw new Error;var c,f,s=[],l=[],p=0,d=0,h=0,g=null,v=t;return c={defer:function(n){if("function"!=typeof n||v!==t)throw new Error;if(null!=g)return c;var o=r.call(arguments,1);return o.push(n),++p,s.push(o),e(),c},abort:function(){return null==g&&u(new Error("abort")),c},await:function(n){if("function"!=typeof n||v!==t)throw new Error;return v=function(t,e){n.apply(null,[t].concat(e))},d||v(g,l),c},awaitAll:function(n){if("function"!=typeof n||v!==t)throw new Error;return v=n,d||v(g,l),c}}}function e(t){return n(arguments.length?+t:1/0)}var r=[].slice,o={};return e.version="1.2.3",e})},17:function(t,n,e){"use strict";function r(t,n,e){function r(){u=!1,w.append("g").attr("class","states").selectAll("path").data(x).enter().append("path").attr("class","state").attr("d",function(t){return t.d0}),s=w.append("g").attr("class","axes"),l=w.append("g").attr("class","dots"),setTimeout(function(){a()},1500)}function a(){w.selectAll(".state").transition().duration(750).delay(function(t,n){return 30*n}).style("fill","#0076df").attr("d",function(t){return t.d1}).each("end",i)}function i(t,n){var e=d3.select(this),r=e.datum(),o=e.node().getBBox(),a=o.x+o.width/2,i=o.y+o.height/2,u=l.datum(r).append("g").attr("class","dot").attr("transform","translate("+a+","+i+")");u.append("circle").attr("r",8).style("stroke-width",1e-6),u.append("text").attr("dy",".3em").style("text-anchor","middle").style("opacity",1e-6).text(function(t){return t.info.code}),e.remove(),50==n&&setTimeout(function(){c()},1e3)}function c(){v.domain(d3.extent(x,function(t){return t.info.edu})).nice(),y.domain(d3.extent(x,function(t){return t.info.money})).nice(),s.append("g").attr("class","x axis").attr("transform","translate(0,"+h+")").call(m).append("text").attr("class","label").attr("x",d).attr("y",-6).style("text-anchor","end").text("Bachelor's degree or higher"),s.append("g").attr("class","y axis").call(E).append("text").attr("x",6).attr("dy",".35em").text("Mean earnings"),w.append("text").attr("class","footnote").attr("x",0).attr("y",h+p.bottom-10).text("Source: American Community Survey, 2014 5-Year Estimate");var t=w.transition().duration(1500);t.selectAll(".dot").attr("transform",function(t){return"translate("+v(t.info.edu)+","+y(t.info.money)+")"}),t.selectAll(".dot text").style("opacity",1),t.selectAll(".dot circle").style("stroke-width","1px"),u=!0}function f(){u&&(w.selectAll(".states, .axes, .dots, .footnote").remove(),r())}var s,l,x=o(n,e);g.on("click",f),r()}function o(t,n){var e={};n.forEach(function(t){e[t.id]={code:t.code,name:t.name,pop:+t.population,edu:+t.bach_degree_plus/100,money:+t.mean_earnings}});var r=l.feature(t,t.objects.states).features,o=[];return r.forEach(function(t){if("72"!=t.id&&"78"!=t.id){var n,r=0;t.geometry.coordinates.forEach(function(t){var e={type:"Feature",geometry:{type:"Polygon",coordinates:t}},o=M.area(e);o>r&&(n=t,r=o)});var i,u=0;n.forEach(function(t){t.length>u&&(i=t,u=t.length)});var c=i.map(x),f=a(c),s="M"+c.join("L")+"Z",l="M"+f.join("L")+"Z",p={id:t.id,coordinates0:c,coordinates1:f,d0:s,d1:l,info:e[t.id]};o.push(p)}}),o}function a(t){for(var n,e,r,o=[],a=0,i=[a],u=d3.geom.polygon(t),c=t[0],f=0,s=t.length;++f<s;)n=t[f],e=n[0]-c[0],r=n[1]-c[1],i.push(a+=Math.sqrt(e*e+r*r)),c=n;for(var l,p=u.area(),d=u.centroid(-1/(6*p)),h=-Math.PI/2,f=-1,g=2*Math.PI/i[i.length-1];++f<s;)l=h+i[f]*g,o.push([d[0]+8*Math.cos(l),d[1]+8*Math.sin(l)]);return o}function i(t){function n(){var n=parseInt(e.style("width"));t.attr("width",n),t.attr("height",Math.round(n/a))}var e=d3.select(t.node().parentNode),r=parseInt(t.style("width")),o=parseInt(t.style("height")),a=r/o;t.attr("viewBox","0 0 "+r+" "+o).attr("perserveAspectRatio","xMinYMid").call(n),d3.select(window).on("resize."+e.attr("id"),n)}var u,c=e(1),f=function(t){return t&&t.__esModule?t:{default:t}}(c),s=e(0),l=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(s),p={top:20,right:40,bottom:50,left:40},d=660-p.left-p.right,h=340-p.top-p.bottom,g=d3.select("#restart-usa-scatter"),v=d3.scale.linear().range([0,d]),y=d3.scale.linear().range([h,0]),m=d3.svg.axis().scale(v).orient("bottom").tickFormat(d3.format(".0%")),E=d3.svg.axis().scale(y).orient("left").tickFormat(d3.format("$s")),x=d3.geo.albersUsa().scale(700).translate([d/2,h/2]),M=d3.geo.path().projection(x),w=d3.select("#viz-usa-to-scatter .svg-holder").append("svg").attr("width",d+p.left+p.right).attr("height",h+p.top+p.bottom).call(i).append("g").attr("transform","translate("+p.left+","+p.top+")");(0,f.default)().defer(d3.json,"/assets/data/us-new.json").defer(d3.tsv,"/assets/data/us-state-info.tsv").await(r)}});
<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>The snow must go on</title> <meta name="author" content="Brendan Sudol"> <meta name="keywords" content=""> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="The snow must go on"> <meta property="og:description" content="The snow must go on"> <meta property="og:url" content="https://www.brendansudol.com/writing/snow"> <meta property="og:site_name" content="Brendan Sudol"> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@"> <meta name="twitter:title" content="The snow must go on"> <meta name="twitter:description" content="The snow must go on"> <meta name="twitter:url" content="https://www.brendansudol.com/writing/snow"> <meta name="twitter:image" content="https://www.brendansudol.com/assets/img/misc/bren-doodle-color.png"> <link rel="preload" href="/assets/fonts/iAWriterQuattroS-Regular.woff2" as="font" type="font/woff2" crossOrigin="anonymous" /> <link rel="stylesheet" href="/assets/css/all.css?202103071420"> </head> <body class='site'> <header class='container mx-auto px2 py3 mb2 col-12'> <a href='/' class='h3 bold black'>Brendan Sudol</a> </header> <div class='site-wrap'> <div class='container mx-auto px2'><div class="h6 gray">December 2014</div> <h1 class="mt0 mb3 h2 sm-h0">The snow must go on</h1> <article class="mb3"><p>Tis the season for gratuitous snow animations in Javascript.</p> <div class="mt1 mb2" id="sky"> </div> <p>How is this effect achieved? The main thing is adding a single snowflake somewhere along the top of the page (or element) and then moving that snowflake to the bottom. And then doing that again and again, while mixing up the snowflake size/color and movement speed/direction to make it look a little more interesting. Hereâ€™s the function (requires jQuery):</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">letItSnow</span><span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"#fff"</span><span class="p">,</span> <span class="s2">"#f3f3f7"</span><span class="p">,</span> <span class="s2">"#dadae7"</span><span class="p">],</span>
        <span class="nx">fonts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Verdana"</span><span class="p">,</span> <span class="s2">"Tahoma"</span><span class="p">,</span> <span class="s2">"Georgia"</span><span class="p">,</span> <span class="s2">"Bookman"</span><span class="p">,</span> <span class="s2">"Times"</span><span class="p">],</span>
        <span class="nx">flakes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"*"</span><span class="p">,</span> <span class="s2">"&amp;#10052;"</span><span class="p">];</span> <span class="c1">// 2nd element is unicode snowflake</span>

    <span class="c1">// if snow added to body, set snow area to viewport</span>
    <span class="kd">var</span> <span class="nx">bbox</span> <span class="o">=</span> <span class="nx">el</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">el</span> <span class="o">===</span> <span class="s1">'body'</span><span class="p">)</span> <span class="nx">bbox</span> <span class="o">=</span> <span class="nb">window</span><span class="p">;</span>

    <span class="c1">// random int between min &amp; max</span>
    <span class="kd">function</span> <span class="nx">rand</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">max</span> <span class="o">-</span> <span class="nx">min</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">min</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// get random element from array</span>
    <span class="kd">function</span> <span class="nx">randInArray</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">rand</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)];</span>
    <span class="p">}</span>

    <span class="c1">// adds unique-ish snowflake to page with falling animation </span>
    <span class="kd">function</span> <span class="nx">snow</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">flake</span> <span class="o">=</span> <span class="s2">"&lt;span&gt;"</span> <span class="o">+</span> <span class="nx">randInArray</span><span class="p">(</span><span class="nx">flakes</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"&lt;/span&gt;"</span><span class="p">,</span>
            <span class="nx">left_pos</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">bbox</span><span class="p">).</span><span class="nx">width</span><span class="p">()</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">(),</span>
            <span class="nx">fall_time</span> <span class="o">=</span> <span class="nx">rand</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">);</span>

        <span class="kd">var</span> <span class="nx">stylez_start</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'position'</span><span class="p">:</span> <span class="s1">'absolute'</span><span class="p">,</span>
            <span class="s1">'top'</span><span class="p">:</span> <span class="o">-</span><span class="mi">50</span><span class="p">,</span>
            <span class="s1">'left'</span><span class="p">:</span> <span class="nx">left_pos</span><span class="p">,</span>
            <span class="s1">'color'</span><span class="p">:</span> <span class="nx">randInArray</span><span class="p">(</span><span class="nx">colors</span><span class="p">),</span>
            <span class="s1">'font-family'</span><span class="p">:</span> <span class="nx">randInArray</span><span class="p">(</span><span class="nx">fonts</span><span class="p">),</span>
            <span class="s1">'font-size'</span><span class="p">:</span> <span class="nx">rand</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
            <span class="s1">'opacity'</span><span class="p">:</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span>
        <span class="p">};</span>

        <span class="kd">var</span> <span class="nx">stylez_end</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'top'</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">bbox</span><span class="p">).</span><span class="nx">height</span><span class="p">()</span> <span class="o">-</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s1">'left'</span><span class="p">:</span> <span class="nx">left_pos</span> <span class="o">+</span> <span class="nx">rand</span><span class="p">(</span><span class="o">-</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span>
            <span class="s1">'opacity'</span><span class="p">:</span> <span class="mf">0.2</span>
        <span class="p">};</span>

        <span class="c1">// add to screen with initial position and styles,</span>
        <span class="c1">// animate it (falling &amp; dimming), then remove it from DOM</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">flake</span><span class="p">).</span><span class="nx">clone</span><span class="p">().</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="nx">stylez_start</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">stylez_end</span><span class="p">,</span> <span class="nx">fall_time</span><span class="p">,</span> <span class="s1">'linear'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
            <span class="p">});</span>
    <span class="p">}</span>

    <span class="c1">// adds a new snowflake every 300 milliseconds</span>
    <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">snow</span><span class="p">();</span> <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure> <p>To call this function, you simply pass in the element where you want the snow flurries, like <code>letItSnow("#upstate-ny")</code> or <code>letItSnow("body")</code>.</p> <p>Happy holidays :)</p> </article> <script src="/assets/build/letItSnow.js"></script> </div> </div> <footer class="container mx-auto p2 mt4 col-12 h5 flex items-center"> <a class="mr2 black underline" href="/">Home</a> <a class="mr2 black underline" href="/writing/">Writing</a> <a class="mr2 black underline" href="https://github.com/brendansudol">Github</a> <a class="mr2 black underline" href="https://twitter.com/brensudol">Twitter</a> <a href="https://getwemoji.com/" target="_blank"> <img class="align-middle" src="/assets/img/misc/peace.gif" width="24" /> </a> </footer> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-37353161-5']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </body> </html>